(sdk_compile)=
# SDK Build

## Overview

This chapter describes how to build the device-side firmware (pac) from the AX SDK, as well as methods for creating deb and rpm packages.

## Environment Preparation

The following resources are required for building device-side firmware:

- PC: Recommended ubuntu-22.04.1
- gcc version 9.2.1 20191025
- SDK development package, i.e., AX650_SDK_Vx.xx.xx.tgz, e.g., AX650_SDK_V3.6.2_20250603154858_NO4873.tgz

:::{tip}
For toolchain download, installation, and configuration, please refer to *AX SDK User Guide.docx*
:::



## Install SDK

1.   Extract the SDK

   ```bash
   tar -xvf AX650_SDK_Vx.xx.x.tgz
   ```

2.  cd into the extracted directory and run `./sdk_unpack.sh` to expand the SDK contents

   ```bash
   cd AX650_SDK_Vx.xx.x
   ./sdk_unpack.sh
   ```

   :::{note}

   - When running `./sdk_unpack.sh`, you can specify a path parameter for the Kernel 5.15.73 source tar package location. If not specified, the script will automatically fetch the Kernel source code.

   - The `sdk_clean.sh` script is used to clean the expanded SDK contents. It is the reverse operation of `sdk_unpack.sh` — all files and directories generated by `sdk_unpack.sh` will be removed. Please back up any private data before using it!
   - After extraction, the `axcl` directory contains the host driver and sample source code as well as AXCL dependent dynamic libraries. The deb/rpm package creation depends on files under the `axcl/out` directory — do not delete them, otherwise package creation will fail.

   :::



## Build

### Host Build

:::{note}

When building device-side firmware, deb/rpm packages are automatically generated. Since package creation depends on drivers and dynamic libraries, if you have modified the host driver or other source code under the `axcl` directory and want to include them in the deb/rpm packages, please build the `axcl` directory first.

:::

1.  Enter the host build directory

   ```bash
   cd axcl/build
   ```

2.  Build

   ```bash
   # Full build at once
   make clean && make host=x86 clean && make host=arm64 clean
   make all install -j128 && make host=x86 all install -j128 && make host=arm64 all install -j128

   # Or build each host architecture separately
   make clean && make all install -j128
   make host=x86 clean && make host=x86 all install -j128
   make host=arm64 clean && make host=arm64 all install -j128
   ```

| Build Option                          | Description                                                        | Output Path                     |
| :------------------------------------ | ------------------------------------------------------------------ | ------------------------------- |
| `host=ax650` or omit `host=`          | For host chip being AX650N                                         | axcl/out/**axcl_linux_ax650**   |
| `host=x86`                            | For host chip being X86 architecture, e.g., Intel, AMD64           | axcl/out/**axcl_linux_x86**     |
| `host=arm64`                          | For other ARM64 host chips, e.g., RK3588, Raspberry Pi 5, etc.    | axcl/out/**axcl_linux_arm64**   |

### Device Build

1. Enter the device-side build directory

   ```bash
   cd build
   ```

2. Build

   ```bash
   make p=AX650_card clean all install axp -j128
   ```

3. Build output path: `build/out`, where AX650_card/**ax650_card.pac** is the device-side firmware. The deb/rpm packages are located in the `build/out` directory.



:::{tip}

- The device side uses ramdisk; the rootfs path is located in the `rootfs/card` directory.
- For deb/rpm package descriptions, refer to the `axcl/build/package` directory. Users can modify them according to their actual needs.

:::
